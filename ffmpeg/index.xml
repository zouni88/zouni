<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ffmpeg on 西凉观云海</title>
    <link>https://r.xboox.cn/ffmpeg/</link>
    <description>Recent content in ffmpeg on 西凉观云海</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <atom:link href="https://r.xboox.cn/ffmpeg/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>OSX采集视频推流</title>
      <link>https://r.xboox.cn/ffmpeg/osx%E9%87%87%E9%9B%86%E8%A7%86%E9%A2%91%E6%8E%A8%E6%B5%81/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://r.xboox.cn/ffmpeg/osx%E9%87%87%E9%9B%86%E8%A7%86%E9%A2%91%E6%8E%A8%E6%B5%81/</guid>
      <description>&lt;h3 id=&#34;视频推流&#34;&gt;视频推流&lt;/h3&gt;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&lt;div class=&#34;codeblock&#34;&gt;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;copy-button-box&#34;&gt;&#xD;&#xA;            &lt;button class=&#34;copy-button&#34; state=&#34;copy&#34; data=&#34;#ZgotmplZ&#34;&gt;&#xD;&#xA;                &lt;i class=&#34;bi bi-copy&#34;&gt;&lt;/i&gt;&#xD;&#xA;            &lt;/button&gt;&#xD;&#xA;        &lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ffmpeg -f avfoundation -framerate &lt;span style=&#34;color:#ae81ff&#34;&gt;30&lt;/span&gt; -i &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0:0&amp;#34;&lt;/span&gt; -rtsp_transport tcp -f rtsp rtsp://192.168.3.44:8554/stream&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&lt;/div&gt;&#xD;&#xA;&lt;p&gt;rtsp 推流参数说明&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;-i &amp;ldquo;0:0&amp;rdquo;  指明采集设备  第1个视频设备和音频设备&lt;/li&gt;&#xA;&lt;li&gt;-i &amp;ldquo;FaceTime HD Camera&amp;rdquo; 指定 摄像头设备&#xA;设备列表枚举&lt;/li&gt;&#xA;&lt;li&gt;ffmpeg -f avfoundation -list_devices true -i &amp;quot;&amp;quot;&lt;/li&gt;&#xA;&lt;li&gt;framerate 30  采集视频30帧&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>rtmp直播</title>
      <link>https://r.xboox.cn/ffmpeg/rtmp%E7%9B%B4%E6%92%AD/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://r.xboox.cn/ffmpeg/rtmp%E7%9B%B4%E6%92%AD/</guid>
      <description>&lt;h3 id=&#34;配置nginx&#34;&gt;配置nginx&lt;/h3&gt;&#xA;&lt;p&gt;nginx.conf配置文件中增加 rtmp块&lt;/p&gt;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&lt;div class=&#34;codeblock&#34;&gt;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;copy-button-box&#34;&gt;&#xD;&#xA;            &lt;button class=&#34;copy-button&#34; state=&#34;copy&#34; data=&#34;rtmp%7b%0d%0a%20%20%20%20%20%20%20%20server%7b%0d%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20listen%201935;%0d%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20#%20%e5%bc%80%e5%90%af%e7%9b%b4%e6%92%ad%0d%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20application%20mylive%20%7b%0d%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20live%20on;%0d%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7d%0d%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20#%e8%bf%99%e9%87%8c%e6%98%afhls%e6%8e%a8%e6%b5%81%0d%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20application%20hls%20%7b%0d%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20live%20on;%0d%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20hls%20on;%0d%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20#%20m3u8%e5%88%86%e7%89%87%e4%bf%9d%e5%ad%98%e5%9c%b0%e5%9d%80%0d%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20hls_path%20/home/small/m3u8File;%0d%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20hls_fragment%206s;%0d%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7d%0d%0a%20%20%20%20%20%20%20%20%7d%0d%0a%7d%0d%0a%0d%0a#%20http%20-%3e%20server%20%e4%b8%8b%e9%9d%a2%e5%a2%9e%e5%8a%a0%0d%0ahttp%7b%0d%0a%20%20%20%20server%7b%0d%0a%0d%0a%20%20%20%20%20%20%20%20location%20/hls%20%7b%0d%0a%20%20%20%20%20%20%20%20%20%20%20%20types%7b%0d%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20application/vnd.apple.mpegurl%20m3u8;%0d%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20video/mp2t%20ts;%0d%0a%20%20%20%20%20%20%20%20%20%20%20%20%7d%0d%0a%20%20%20%20%20%20%20%20%20%20%20%20alias%20/home/small/m3u8File;%0d%0a%20%20%20%20%20%20%20%20%20%20%20%20expires%20-1;%0d%0a%20%20%20%20%20%20%20%20%20%20%20%20add_header%20Cache-Control%20no-cache;%0d%0a%20%20%20%20%20%20%20%20%7d%0d%0a%20%20%20%20%7d%0d%0a%7d%0d%0a%20%20%20%20&#34;&gt;&#xD;&#xA;                &lt;i class=&#34;bi bi-copy&#34;&gt;&lt;/i&gt;&#xD;&#xA;            &lt;/button&gt;&#xD;&#xA;        &lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&#xD;&#xA;    &#xD;&#xA;        &lt;pre&gt;&lt;code&gt;rtmp{&#xD;&#xA;        server{&#xD;&#xA;                listen 1935;&#xD;&#xA;                # 开启直播&#xD;&#xA;                application mylive {&#xD;&#xA;                        live on;&#xD;&#xA;                }&#xD;&#xA;                #这里是hls推流&#xD;&#xA;                application hls {&#xD;&#xA;                        live on;&#xD;&#xA;                        hls on;&#xD;&#xA;                        # m3u8分片保存地址&#xD;&#xA;                        hls_path /home/small/m3u8File;&#xD;&#xA;                        hls_fragment 6s;&#xD;&#xA;                }&#xD;&#xA;        }&#xD;&#xA;}&#xD;&#xA;&#xD;&#xA;# http -&amp;gt; server 下面增加&#xD;&#xA;http{&#xD;&#xA;    server{&#xD;&#xA;&#xD;&#xA;        location /hls {&#xD;&#xA;            types{&#xD;&#xA;                application/vnd.apple.mpegurl m3u8;&#xD;&#xA;                video/mp2t ts;&#xD;&#xA;            }&#xD;&#xA;            alias /home/small/m3u8File;&#xD;&#xA;            expires -1;&#xD;&#xA;            add_header Cache-Control no-cache;&#xD;&#xA;        }&#xD;&#xA;    }&#xD;&#xA;}&#xD;&#xA;    &lt;/code&gt;&lt;/pre&gt;&#xD;&#xA;    &#xD;&#xA;&lt;/div&gt;&#xD;&#xA;&lt;h3 id=&#34;推流&#34;&gt;推流&lt;/h3&gt;&#xA;&lt;pre&gt;&lt;code&gt;ffmpeg -re -i /home/small/test.mp4 -codec copy -f flv -r 60 -s 320*480 -start_number 100 -y rtmp:172.26.193.96/hls/hlsstream&#xD;&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>交叉编译</title>
      <link>https://r.xboox.cn/ffmpeg/%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://r.xboox.cn/ffmpeg/%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91/</guid>
      <description>&lt;h1 id=&#34;1-交叉编译-ffmpeg---aarch64&#34;&gt;1. 交叉编译 ffmpeg -&amp;gt; aarch64&lt;/h1&gt;&#xA;&lt;h2 id=&#34;11参数说明&#34;&gt;1.1参数说明：&lt;/h2&gt;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&lt;div class=&#34;codeblock&#34;&gt;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;copy-button-box&#34;&gt;&#xD;&#xA;            &lt;button class=&#34;copy-button&#34; state=&#34;copy&#34; data=&#34;--cross-prefix%20%e6%8c%87%e5%ae%9a%e4%ba%a4%e5%8f%89%e7%bc%96%e8%af%91%e5%b7%a5%e5%85%b7%e9%93%be%e8%b7%af%e5%be%84%0d%0a--arch%20%e6%8c%87%e5%ae%9acpu%e6%8c%87%e4%bb%a4%e9%9b%86%e6%9e%b6%e6%9e%84%0d%0a--target-os%20%e7%9b%ae%e6%a0%87%e7%b3%bb%e7%bb%9f%20linux%0d%0a--cc%20%20c%20%e7%bc%96%e8%af%91%e5%99%a8%20%e9%bb%98%e8%ae%a4%ef%bc%9acc%20%20%e8%bf%99%e9%87%8c%e6%8c%87%e5%ae%9aclang%20%20google%e5%ae%98%e6%96%b9%e5%b7%b2%e7%bb%8f%e5%9c%a8ndk%e5%8e%bb%e6%8e%89%e4%ba%86gcc%0d%0a--enable-cross-compile%20%e5%bc%80%e5%90%af%e4%ba%a4%e5%8f%89%e7%bc%96%e8%af%91%0d%0a--disable-static%20%e5%85%b3%e9%97%ad%e9%9d%99%e6%80%81%e7%bc%96%e8%af%91%0d%0a--enable-shared%20%e5%bc%80%e5%90%afshared%e8%a1%a8%e7%a4%ba%e7%bc%96%e8%af%91%e5%8a%a8%e6%80%81%e9%93%be%e6%8e%a5%e5%ba%93%0d%0a--disable-ffmpeg%20%e4%b8%8d%e5%bc%80%e5%90%afffmpeg%20%e6%a8%a1%e5%9d%97%0d%0a--disable-ffplay%20%e4%b8%8d%e5%bc%80%e5%90%afffplay%20%e6%92%ad%e6%94%be%e5%99%a8%e6%a8%a1%e5%9d%97%0d%0a--disable-ffprobe%20%e4%b8%8d%e5%bc%80%e5%90%afffprobe%20%e9%9f%b3%e8%a7%86%e9%a2%91%e5%88%86%e6%9e%90%e6%a8%a1%e5%9d%97&#34;&gt;&#xD;&#xA;                &lt;i class=&#34;bi bi-copy&#34;&gt;&lt;/i&gt;&#xD;&#xA;            &lt;/button&gt;&#xD;&#xA;        &lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;--cross-prefix 指定交叉编译工具链路径&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;--arch 指定cpu指令集架构&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;--target-os 目标系统 linux&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;--cc  c 编译器 默认：cc  这里指定clang  google官方已经在ndk去掉了gcc&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;--enable-cross-compile 开启交叉编译&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;--disable-static 关闭静态编译&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;--enable-shared 开启shared表示编译动态链接库&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;--disable-ffmpeg 不开启ffmpeg 模块&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;--disable-ffplay 不开启ffplay 播放器模块&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;--disable-ffprobe 不开启ffprobe 音视频分析模块&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&lt;/div&gt;&#xD;&#xA;&lt;h2 id=&#34;12设置环境变量&#34;&gt;1.2设置环境变量&lt;/h2&gt;&#xA;&lt;p&gt;NDK版本：android-ndk-r22b&lt;/p&gt;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&lt;div class=&#34;codeblock&#34;&gt;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;copy-button-box&#34;&gt;&#xD;&#xA;            &lt;button class=&#34;copy-button&#34; state=&#34;copy&#34; data=&#34;export%20NDK_ROOT=/mnt/e/WorkRoom/ubuntu/android-ndk-r22b/toolchains/llvm/prebuilt/linux-x86_64%0d%0aexport%20SYSROOT=$NDK_ROOT/sysroot&#34;&gt;&#xD;&#xA;                &lt;i class=&#34;bi bi-copy&#34;&gt;&lt;/i&gt;&#xD;&#xA;            &lt;/button&gt;&#xD;&#xA;        &lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;export NDK_ROOT&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;/mnt/e/WorkRoom/ubuntu/android-ndk-r22b/toolchains/llvm/prebuilt/linux-x86_64&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;export SYSROOT&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;$NDK_ROOT/sysroot&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&lt;/div&gt;&#xD;&#xA;&lt;h2 id=&#34;13-执行-configure&#34;&gt;1.3 执行 ./configure&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;需要注意&lt;/strong&gt;：新版本ndk工具链取消了gcc编译器，默认编译器是clang,配置项目里面需要指定c/c++ 编译器&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;&amp;ndash;cc=$NDK_ROOT/bin/armv7a-linux-androideabi21-clang &lt;br&gt;&#xA;&amp;ndash;cxx=$NDK_ROOT/bin/armv7a-linux-androideabi21-clang++&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;完整的编译参数如下：&lt;/p&gt;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&lt;div class=&#34;codeblock&#34;&gt;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;copy-button-box&#34;&gt;&#xD;&#xA;            &lt;button class=&#34;copy-button&#34; state=&#34;copy&#34; data=&#34;#ZgotmplZ&#34;&gt;&#xD;&#xA;                &lt;i class=&#34;bi bi-copy&#34;&gt;&lt;/i&gt;&#xD;&#xA;            &lt;/button&gt;&#xD;&#xA;        &lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;small@small:~$ ./configure  &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--prefix&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;/mnt/e/WorkRoom/ffmpeg/ffarm &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--arch&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;aarch64 &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--cpu&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;armv8 &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--target-os&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;android &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--sysroot&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;$SYSROOT &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--cross-prefix&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;$NDK_ROOT/bin/aarch64-linux-android- &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--extra-cflags&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;-I&lt;/span&gt;$SYSROOT&lt;span style=&#34;color:#e6db74&#34;&gt;/usr/include -fPIC -DANDROID -mfpu=neon -mfloat-abi=softfp &amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--extra-ldflags&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;-L&lt;/span&gt;$SYSROOT&lt;span style=&#34;color:#e6db74&#34;&gt;/usr/lib&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--cc&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;$NDK_ROOT/bin/aarch64-linux-android21-clang &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--nm&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;$NDK_ROOT/bin/aarch64-linux-android-nm &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--cxx&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;$NDK_ROOT/bin/aarch64-linux-android21-clang++ &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--enable-runtime-cpudetect &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--enable-neon &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--enable-shared &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--enable-asm &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--disable-static &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--enable-cross-compile &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--enable-small &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--enable-jni &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--enable-mediacodec &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--enable-gpl &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--enable-decoder&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;h264_mediacodec &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--disable-doc &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--disable-debug &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--disable-ffmpeg &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--disable-ffplay &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--disable-ffprobe &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--disable-postproc &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--disable-avdevice &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--disable-symver &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;--disable-stripping&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&lt;/div&gt;&#xD;&#xA;&lt;pre&gt;&lt;code&gt;# --enable-hwaccel=h264_mediacodec \&#xD;&#xA;# --enable-asm \&#xD;&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;设置环境变量&#xA;export NDK_ROOT=/mnt/e/WorkRoom/android/ndk/android-ndk-r26b/toolchains/llvm/prebuilt/linux-x86_64&lt;/p&gt;</description>
    </item>
    <item>
      <title>关于编码的理解</title>
      <link>https://r.xboox.cn/ffmpeg/%E5%85%B3%E4%BA%8E%E7%BC%96%E7%A0%81%E7%9A%84%E7%90%86%E8%A7%A3/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://r.xboox.cn/ffmpeg/%E5%85%B3%E4%BA%8E%E7%BC%96%E7%A0%81%E7%9A%84%E7%90%86%E8%A7%A3/</guid>
      <description>&lt;h3 id=&#34;yuv-一种编码格式中间格式通常摄像头采集的原始码流都会先转为中间格式再转为其他格式进行封装传输&#34;&gt;YUV 一种编码格式，中间格式，通常摄像头采集的原始码流都会先转为中间格式，再转为其他格式进行封装传输；&lt;/h3&gt;&#xA;&lt;p&gt;Y分量： 亮度&#xA;UV分量：色度&lt;/p&gt;&#xA;&lt;p&gt;YUV格式的两大类：平面(plannr)和紧凑(packed)。对于planar的YUV格式，先连续存储所有像素点的Y，紧接着存储所有像素点的U，随是存储所有像素点的V，或者是先v后u对于packed的YUV格式，每个像素点的Y，U，V是连续交替存储的。比如YUV420P 其中P表示紧凑，YUV420SP其中的SP表示“半紧凑”&lt;/p&gt;&#xA;&lt;h3 id=&#34;rgb-比yuv面世晚主要流行于-led时代&#34;&gt;RGB 比YUV面世晚，主要流行于 LED时代&lt;/h3&gt;&#xA;&lt;h3 id=&#34;编码器的由来&#34;&gt;编码器的由来&lt;/h3&gt;&#xA;&lt;p&gt;&lt;img src=&#34;../res/ffmpeg/codec_list.png&#34; alt=&#34;Alt text&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;为什么会有这么多种编码器？看看他们的发展史的。&lt;/p&gt;&#xA;&lt;p&gt;ITU-T这个组织是专门做音视频的组织，还有一个组织ISO，这个组织是专门做各种标准规范的。&lt;/p&gt;&#xA;&lt;p&gt;ITU-T是最先研发了音视频通话的，最先研究出了H261，后来发布H262,H263，指导后来的H视频编解码器，这是ITU-T的H26x系列。&lt;/p&gt;&#xA;&lt;p&gt;两个组织互相竞争，&lt;/p&gt;&#xA;&lt;p&gt;ISO也研发了MPEG-1、MPEG-2、MPEG-3、MPEG-4,对应H26x系列。&lt;/p&gt;&#xA;&lt;p&gt;两个组织竞争了相近20年，两个组织两个标准，最后再1998年双方合作，在第一版H264的基础上双方进行共同研发，发布了后来的更成熟的H264，作为后来的结晶，这一结晶在ITU-T组织中依然称为H264，但是在ISO组织中称为MPEG4-avc，这只是在不同组织中的称呼名字。&lt;/p&gt;&#xA;&lt;p&gt;但是在实际代码中创建的时候，都是传入，首先是video表示一个视频标签，然后传入ISO组织的名称“avc”表示H264编解码器，H265就是“video/hevc”。&lt;/p&gt;&#xA;&lt;p&gt;随着社会的进步，技术的发展，生活中使用的显示器，越来越大，视频画面也变大，广泛的出现了4K、8K视频，这对于H264来说已经存在明显不足了，所以两个组织又一起合作研发了H265.&lt;/p&gt;&#xA;&lt;p&gt;H265编解码技术在ITU-T组织中称为H265，在ISO组织中称为HEVC。&lt;/p&gt;&#xA;&lt;p&gt;H265在H264的基础上研发的，可以达到更高压缩的同时实现画面更清晰。&lt;/p&gt;&#xA;&lt;p&gt;H264可以实现把4M的数组压缩到80k-90k，&lt;/p&gt;&#xA;&lt;p&gt;同样的画质和同样的码率，H.265比H2.64 占用的存储空间要少理论50%；&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;../res/ffmpeg/itu-t.png&#34; alt=&#34;Alt text&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;封装格式&lt;/p&gt;&#xA;&lt;p&gt;mp4、flv、rmvb、avi等称为封装格式。&lt;/p&gt;&#xA;&lt;p&gt;封装格式内部包含视频轨（H264、H265编码器编码之后的后缀是h264、h265的视频编码文件）、音频轨（后缀是.aac .mp3的音频编码文件）、字幕轨以及视频宽高等编解码信息。&lt;/p&gt;&#xA;&lt;p&gt;编解码格式&lt;/p&gt;&#xA;&lt;p&gt;H264、H265、VP8、VP9等称为编码格式。&lt;/p&gt;&#xA;&lt;p&gt;其他参与者，其他编解码器&lt;/p&gt;&#xA;&lt;p&gt;Google后来推出了VP8、VP9的编解码器，VP8,VP9分别和H264、H265做对应竞争。&lt;/p&gt;&#xA;&lt;p&gt;Microsoft推出了VC-1。&lt;/p&gt;&#xA;&lt;p&gt;国产自主标准：AVS/AVS+/AVS2，只是仅仅用于机顶盒，广播电视，其他领域并没有用到。但是现在的广播电视也已经废弃了AVS标准了用了其他更优良的标准。&lt;/p&gt;&#xA;&lt;p&gt;视频的组成&lt;/p&gt;&#xA;&lt;p&gt;可以通过FFmpeg命令把视频文件进行拆分，把一个mp4封装格式的视频文件可以抽取其中的h264视频流文件，也可以抽取其中的aac音频流文件。&lt;/p&gt;&#xA;&lt;p&gt;视频编码文件、音频编码文件、编解码信息包括视频宽高等共同组成了封装视频文件。&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/534490577&#34;&gt;原文链接&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>参数注释</title>
      <link>https://r.xboox.cn/ffmpeg/%E5%8F%82%E6%95%B0%E6%B3%A8%E9%87%8A/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://r.xboox.cn/ffmpeg/%E5%8F%82%E6%95%B0%E6%B3%A8%E9%87%8A/</guid>
      <description>&lt;p&gt;a) 通用选项&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;-L license&#xD;&#xA;-h 帮助&#xD;&#xA;-fromats 显示可用的格式，编解码的，协议的...&#xD;&#xA;-f fmt 强迫采用格式fmt&#xD;&#xA;-I filename 输入文件&#xD;&#xA;-y 覆盖输出文件&#xD;&#xA;-t duration 设置纪录时间 hh:mm:ss[.xxx]格式的记录时间也支持&#xD;&#xA;-ss position 搜索到指定的时间 [-]hh:mm:ss[.xxx]的格式也支持&#xD;&#xA;-title string 设置标题&#xD;&#xA;-author string 设置作者&#xD;&#xA;-copyright string 设置版权&#xD;&#xA;-comment string 设置评论&#xD;&#xA;-target type 设置目标文件类型(vcd,svcd,dvd) 所有的格式选项（比特率，编解码以及缓冲区大小）自动设置，只需要输入如下的就可以了：ffmpeg -i myfile.avi -target vcd /tmp/vcd.mpg&#xD;&#xA;-hq 激活高质量设置&#xD;&#xA;-itsoffset offset 设置以秒为基准的时间偏移，该选项影响所有后面的输入文件。该偏移被加到输入文件的时戳，定义一个正偏移意味着相应的流被延迟了 offset秒。 [-]hh:mm:ss[.xxx]的格式也支持&#xD;&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;b) 视频选项&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;-b bitrate 设置比特率，缺省200kb/s&#xD;&#xA;-r fps 设置帧频 缺省25&#xD;&#xA;-s size 设置帧大小 格式为WXH 缺省160X128.下面的简写也可以直接使用：&#xD;&#xA;Sqcif 128X96 qcif 176X144 cif 252X288 4cif 704X576&#xD;&#xA;-aspect aspect 设置横纵比 4:3 16:9 或 1.3333 1.7777&#xD;&#xA;-croptop size 设置顶部切除带大小 像素单位&#xD;&#xA;-cropbottom size –cropleft size –cropright size&#xD;&#xA;-padtop size 设置顶部补齐的大小 像素单位&#xD;&#xA;-padbottom size –padleft size –padright size –padcolor color 设置补齐条颜色(hex,6个16进制的数，红:绿:兰排列，比如 000000代表黑色)&#xD;&#xA;-vn 不做视频记录&#xD;&#xA;-bt tolerance 设置视频码率容忍度kbit/s&#xD;&#xA;-maxrate bitrate设置最大视频码率容忍度&#xD;&#xA;-minrate bitreate 设置最小视频码率容忍度&#xD;&#xA;-bufsize size 设置码率控制缓冲区大小&#xD;&#xA;-vcodec codec 强制使用codec编解码方式。如果用copy表示原始编解码数据必须被拷贝。&#xD;&#xA;-sameq 使用同样视频质量作为源（VBR）&#xD;&#xA;-pass n 选择处理遍数（1或者2）。两遍编码非常有用。第一遍生成统计信息，第二遍生成精确的请求的码率&#xD;&#xA;-passlogfile file 选择两遍的纪录文件名为file&#xD;&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;c)高级视频选项&lt;/p&gt;</description>
    </item>
    <item>
      <title>常用命令</title>
      <link>https://r.xboox.cn/ffmpeg/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://r.xboox.cn/ffmpeg/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</guid>
      <description>&lt;p&gt;输入视频，输出转码后的视频&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;ffmpeg -i intput.mp4 output.mp4&lt;/p&gt;&#xA;&lt;/blockquote&gt;</description>
    </item>
    <item>
      <title>推流</title>
      <link>https://r.xboox.cn/ffmpeg/%E6%8E%A8%E6%B5%81/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://r.xboox.cn/ffmpeg/%E6%8E%A8%E6%B5%81/</guid>
      <description>&lt;h3 id=&#34;rtsp推流&#34;&gt;rtsp推流&lt;/h3&gt;&#xA;&lt;pre&gt;&lt;code&gt;ffmpeg -i /dev/video0 -c copy -rtsp_transport tcp -f rtsp rtsp://192.168.3.44:8554/stream&#xD;&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;参考文章：https://zhuanlan.zhihu.com/p/73984438&lt;/p&gt;</description>
    </item>
    <item>
      <title>时间戳</title>
      <link>https://r.xboox.cn/ffmpeg/%E6%97%B6%E9%97%B4%E6%88%B3/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://r.xboox.cn/ffmpeg/%E6%97%B6%E9%97%B4%E6%88%B3/</guid>
      <description>&lt;h3 id=&#34;time_base&#34;&gt;time_base&lt;/h3&gt;&#xA;&lt;pre&gt;&lt;code&gt;在 FFmpeg 中，时间基(time_base)是时间戳(timestamp)的单位，时间戳值乘以时间基，可以得到实际的时刻值(以秒等为单位)。例如，如果一个视频帧的 dts 是 40，pts 是 160，其 time_base 是 1/1000 秒，那么可以计算出此视频帧的解码时刻是 40 毫秒(40/1000)，显示时刻是 160 毫秒(160/1000)。FFmpeg 中时间戳(pts/dts)的类型是 int64_t 类型，把一个 time_base 看作一个时钟脉冲，则可把 dts/pts 看作时钟脉冲的计数。&#xD;&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;参考：https://zhuanlan.zhihu.com/p/545055099&lt;/p&gt;</description>
    </item>
    <item>
      <title>查看动态信息</title>
      <link>https://r.xboox.cn/ffmpeg/%E6%9F%A5%E7%9C%8B%E5%8A%A8%E6%80%81%E5%BA%93%E4%BF%A1%E6%81%AF/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://r.xboox.cn/ffmpeg/%E6%9F%A5%E7%9C%8B%E5%8A%A8%E6%80%81%E5%BA%93%E4%BF%A1%E6%81%AF/</guid>
      <description>&lt;h3 id=&#34;查看动态库信息&#34;&gt;查看动态库信息&lt;/h3&gt;&#xA;&lt;pre&gt;&lt;code&gt;readelf -h libavformat.so&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>编译</title>
      <link>https://r.xboox.cn/ffmpeg/%E7%BC%96%E8%AF%91/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://r.xboox.cn/ffmpeg/%E7%BC%96%E8%AF%91/</guid>
      <description>&lt;h2 id=&#34;linux-编译-ffmpeg&#34;&gt;linux 编译 ffmpeg&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;下载源码&lt;br&gt;&#xA;&lt;a href=&#34;https://github.com/FFmpeg/FFmpeg&#34;&gt;下载ffmpeg源码&lt;/a&gt; 或者通过git clone源码：&lt;/p&gt;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&lt;div class=&#34;codeblock&#34;&gt;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;copy-button-box&#34;&gt;&#xD;&#xA;            &lt;button class=&#34;copy-button&#34; state=&#34;copy&#34; data=&#34;#ZgotmplZ&#34;&gt;&#xD;&#xA;                &lt;i class=&#34;bi bi-copy&#34;&gt;&lt;/i&gt;&#xD;&#xA;            &lt;/button&gt;&#xD;&#xA;        &lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git clone git@github.com:FFmpeg/FFmpeg.git&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&lt;/div&gt;&#xD;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;进入源码根目录，执行&lt;code&gt;./configure&lt;/code&gt; 出现如下错误：&lt;/p&gt;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&lt;div class=&#34;codeblock&#34;&gt;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;copy-button-box&#34;&gt;&#xD;&#xA;            &lt;button class=&#34;copy-button&#34; state=&#34;copy&#34; data=&#34;nasm/yasm%20not%20found&#34;&gt;&#xD;&#xA;                &lt;i class=&#34;bi bi-copy&#34;&gt;&lt;/i&gt;&#xD;&#xA;            &lt;/button&gt;&#xD;&#xA;        &lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;nasm/yasm not found&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&lt;/div&gt;&#xD;&#xA;&lt;p&gt;需要下载yasm汇编器&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;下载yasm汇编器&lt;/p&gt;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&lt;div class=&#34;codeblock&#34;&gt;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;copy-button-box&#34;&gt;&#xD;&#xA;            &lt;button class=&#34;copy-button&#34; state=&#34;copy&#34; data=&#34;#ZgotmplZ&#34;&gt;&#xD;&#xA;                &lt;i class=&#34;bi bi-copy&#34;&gt;&lt;/i&gt;&#xD;&#xA;            &lt;/button&gt;&#xD;&#xA;        &lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;wget https://www.tortall.net/projects/yasm/releases/yasm-1.3.0.tar.gz&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&lt;/div&gt;&#xD;&#xA;&lt;p&gt;解压安装  :&lt;/p&gt;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&lt;div class=&#34;codeblock&#34;&gt;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;copy-button-box&#34;&gt;&#xD;&#xA;            &lt;button class=&#34;copy-button&#34; state=&#34;copy&#34; data=&#34;tar%20-zxvf%20yasm-1.3.0.tar.gz&#34;&gt;&#xD;&#xA;                &lt;i class=&#34;bi bi-copy&#34;&gt;&lt;/i&gt;&#xD;&#xA;            &lt;/button&gt;&#xD;&#xA;        &lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;tar -zxvf yasm-1.3.0.tar.gz&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&lt;/div&gt;&#xD;&#xA;&lt;p&gt;进入解压后目录&lt;/p&gt;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&lt;div class=&#34;codeblock&#34;&gt;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;copy-button-box&#34;&gt;&#xD;&#xA;            &lt;button class=&#34;copy-button&#34; state=&#34;copy&#34; data=&#34;cd%20yasm-1.3.0%0d%0a%0a./configure%0d%0a#%20%e6%8e%a5%e7%9d%80%20%0d%0amake%20%0d%0asudo%20make%20install&#34;&gt;&#xD;&#xA;                &lt;i class=&#34;bi bi-copy&#34;&gt;&lt;/i&gt;&#xD;&#xA;            &lt;/button&gt;&#xD;&#xA;        &lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cd yasm-1.3.0&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./configure&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 接着 &lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo make install&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&lt;/div&gt;&#xD;&#xA;&lt;p&gt;接着返回 ffmpeg目录，执行命令&lt;/p&gt;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&lt;div class=&#34;codeblock&#34;&gt;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;copy-button-box&#34;&gt;&#xD;&#xA;            &lt;button class=&#34;copy-button&#34; state=&#34;copy&#34; data=&#34;#ZgotmplZ&#34;&gt;&#xD;&#xA;                &lt;i class=&#34;bi bi-copy&#34;&gt;&lt;/i&gt;&#xD;&#xA;            &lt;/button&gt;&#xD;&#xA;        &lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;small@small:~/FFmpeg$&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./configure --prefix&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/usr/local/ffmpeg/&amp;#34;&lt;/span&gt; --enable-libx264 --enable-gpl --enable-nonfree --enable-libfdk-aac&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&lt;/div&gt;&#xD;&#xA;&lt;p&gt;出现如下显示就代表成功了：&lt;/p&gt;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&lt;div class=&#34;codeblock&#34;&gt;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;copy-button-box&#34;&gt;&#xD;&#xA;            &lt;button class=&#34;copy-button&#34; state=&#34;copy&#34; data=&#34;#ZgotmplZ&#34;&gt;&#xD;&#xA;                &lt;i class=&#34;bi bi-copy&#34;&gt;&lt;/i&gt;&#xD;&#xA;            &lt;/button&gt;&#xD;&#xA;        &lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;small@small:~/FFmpeg$ ./configure&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;install prefix            /usr/local&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;source path               .&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;C compiler                gcc&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;C library                 glibc&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ARCH                      x86 &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;generic&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;big-endian                no&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;runtime cpu detection     yes&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;standalone assembly       yes&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;x86 assembler             yasm&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;MMX enabled               yes&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;MMXEXT enabled            yes&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;3DNow! enabled            yes&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;3DNow! extended enabled   yes&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;SSE enabled               yes&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;SSSE3 enabled             yes&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;AESNI enabled             yes&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;AVX enabled               yes&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;AVX2 enabled              yes&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;AVX-512 enabled           yes&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;XOP enabled               yes&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&lt;/div&gt;&#xD;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;启用第三方模块支持libfdk_aac和libx264需要单独下载编译&#34;&gt;启用第三方模块支持：libfdk_aac和libx264，需要单独下载编译&lt;/h2&gt;&#xA;&lt;p&gt;出现如下错误&lt;/p&gt;</description>
    </item>
    <item>
      <title>视频转m3u8存储</title>
      <link>https://r.xboox.cn/ffmpeg/%E8%BD%ACm3u8-hls/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://r.xboox.cn/ffmpeg/%E8%BD%ACm3u8-hls/</guid>
      <description>&lt;h3 id=&#34;将视频转为m3u8存储&#34;&gt;将视频转为m3u8存储&lt;/h3&gt;&#xA;&lt;p&gt;参数使用说明记录笔记：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;re : 将视频按照时间顺序进行切割，否则没有这个参数，如果去播放推送的视频流，顺序就会错乱，或者说，ffmpeg会按照最快速度去切割&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;start_number  m3u8列表中的第一片序列数，可以从指定序号开始&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&lt;div class=&#34;codeblock&#34;&gt;&#xD;&#xA;    &#xD;&#xA;        &lt;div class=&#34;copy-button-box&#34;&gt;&#xD;&#xA;            &lt;button class=&#34;copy-button&#34; state=&#34;copy&#34; data=&#34;#ZgotmplZ&#34;&gt;&#xD;&#xA;                &lt;i class=&#34;bi bi-copy&#34;&gt;&lt;/i&gt;&#xD;&#xA;            &lt;/button&gt;&#xD;&#xA;        &lt;/div&gt;&#xD;&#xA;    &#xD;&#xA;&#xD;&#xA;    &#xD;&#xA;        &lt;pre&gt;&lt;code&gt;ffmpeg -re -i input.mp4 -c copy -f hls -bsf:v h264_mp4toannexb -start_number 27 output.m3u8&#xD;&#xA;&#xD;&#xA;#EXTM3U&#xD;&#xA;#EXT-X-VERSION:3&#xD;&#xA;#EXT-X-TARGETDURATION:10&#xD;&#xA;#EXT-X-MEDIA-SEQUENCE:27&#xD;&#xA;#EXTINF:10.427778,&#xD;&#xA;output27.ts&#xD;&#xA;#EXTINF:10.427778,&#xD;&#xA;output28.ts&#xD;&#xA;#EXTINF:10.427778,&#xD;&#xA;output29.ts&lt;/code&gt;&lt;/pre&gt;&#xD;&#xA;    &#xD;&#xA;&lt;/div&gt;&#xD;&#xA;&lt;ol start=&#34;3&#34;&gt;&#xA;&lt;li&gt;hls_time :  设置m3u8 切片时长； 可以设置每一片时长 10s ;切片规则：从关键帧开始，时间不是很均匀，先转码再切片，时间会比较规律。&lt;/li&gt;&#xA;&lt;li&gt;hls_list_size:  设置m3u8 列表中TS切片的个数。&#xA;ffmpeg -re -i input.mp4 -c copy -f hls  -bsf:v h264_mp4toannexb -hls_time 10 -hls_list_size 3 output.m3u8&lt;/li&gt;&#xA;&lt;/ol&gt;</description>
    </item>
  </channel>
</rss>
